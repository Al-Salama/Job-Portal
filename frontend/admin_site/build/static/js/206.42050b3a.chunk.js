"use strict";(self.webpackChunkadmin_site=self.webpackChunkadmin_site||[]).push([[206],{496:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(433),r=n(439),a=n(791);function i(e){var t=(0,a.useState)(e),n=(0,r.Z)(t,2),i=n[0],c=n[1];return{array:i,set:c,push:function(e){c((function(t){return[].concat((0,s.Z)(t),[e])}))},filter:function(e){c((function(t){return t.filter(e)}))},update:function(e,t){c((function(n){return[].concat((0,s.Z)(n.slice(0,e)),[t],(0,s.Z)(n.slice(e+1,n.length)))}))},remove:function(e){c((function(t){return[].concat((0,s.Z)(t.slice(0,e)),(0,s.Z)(t.slice(e+1,t.length)))}))},clear:function(){c([])}}}},206:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var s=n(165),r=n(683),a=n(861),i=n(762),c=n(439),o=n(791),u=n(962),l=n(496);var d=n.p+"static/media/search.3dd142bebdb9957cc066ead0b1577746.svg",p=n(184);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.prototype;return!Number.isNaN(e)&&Number.isFinite(e)}function h(e){var t=parseInt(this.dataset.id);f(t)?window.location.href="/submission?id=".concat(t):e.preventDefault()}function m(e){return b.apply(this,arguments)}function b(){return b=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,i,c,o,l,d,p,f=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:String.prototype,a=f.length>2&&void 0!==f[2]?f[2]:[],i=(f.length>3&&void 0!==f[3]?f[3]:[]).find((function(e){return!0===e.selected})),c=encodeURI(n),o=[{key:"appId",value:i.id},{key:"s",value:c}],l="".concat(u.Z.api,"/submissions/").concat(i.id,"/search/").concat(c),e.prev=7,e.next=10,fetch(l,{method:"GET",credentials:"include"});case 10:d=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.error(e.t0);case 16:return e.prev=16,e.next=19,d.json();case 19:if(p=e.sent,!d.ok){e.next=28;break}L(o),a.setters[0]((0,r.Z)((0,r.Z)({},p.submissions.new),{},{buttonId:"category-new"})),a.setters[1]((0,r.Z)((0,r.Z)({},p.submissions.accepted),{},{buttonId:"category-accepted"})),a.setters[2]((0,r.Z)((0,r.Z)({},p.submissions.pending),{},{buttonId:"category-pending"})),a.setters[3]((0,r.Z)((0,r.Z)({},p.submissions.rejected),{},{buttonId:"category-rejected"})),e.next=33;break;case 28:if(401!==d.status){e.next=31;break}return window.location.href="/login",e.abrupt("return");case 31:console.error("Error search submissions, error code:",d.status),console.error("Response:\n",p);case 33:return e.finish(16);case 34:case"end":return e.stop()}}),e,null,[[7,13,16,34]])}))),b.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,i,c,o,l=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:{},i=[{key:"appId",value:l.length>1&&void 0!==l[1]?l[1]:1}],c=E("".concat(u.Z.api,"/submissions"),i),e.prev=4,e.next=7,fetch(c,{method:"GET",credentials:"include"});case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:if(e.prev=13,!a){e.next=33;break}return e.next=17,a.json();case 17:if(o=e.sent,!a.ok){e.next=28;break}L(i),n.setNewSubmissions((0,r.Z)((0,r.Z)({},o.submissions.new),{},{buttonId:"category-new"})),n.setAcceptedSubmissions((0,r.Z)((0,r.Z)({},o.submissions.accepted),{},{buttonId:"category-accepted"})),n.setPendingSubmissions((0,r.Z)((0,r.Z)({},o.submissions.pending),{},{buttonId:"category-pending"})),n.setRejectedSubmissions((0,r.Z)((0,r.Z)({},o.submissions.rejected),{},{buttonId:"category-rejected"})),o.applications=o.applications.map((function(e,t){var n=new Date;return n.setTime(Number(e.startDate)),(0,r.Z)((0,r.Z)({},e),{},{startDate:n.toLocaleDateString("ar-US",{year:"numeric",month:"long",day:"numeric"})})})),n.setApplications(o.applications),e.next=33;break;case 28:if(401!==a.status){e.next=31;break}return window.location.href="/login",e.abrupt("return");case 31:console.error("Error fetching submissions, error code:",a.status),console.error("Response:\n",o);case 33:return e.finish(13);case 34:case"end":return e.stop()}}),e,null,[[4,10,13,34]])}))),g.apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return x=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,i,c,o,l,d,p,h,m,b=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:[],a=(b.length>2&&void 0!==b[2]?b[2]:[]).find((function(e){return!0===e.selected})),i=n.getters.findIndex((function(e){return!0===e.selected})),f(c=parseInt(this.dataset.pageNumber))){e.next=7;break}return e.abrupt("return");case 7:return o=new Proxy(new URLSearchParams(window.location.search),{get:function(e,t){return e.get(t)}}),l=[],o.s&&l.push({key:"s",value:o.s}),p="".concat(u.Z.api,"/submissions/").concat(a.id,"/").concat(i,"/pages/").concat(c),h=E(p,l),e.prev=12,e.next=15,fetch(h,{method:"GET",credentials:"include"});case 15:d=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(12),console.error(e.t0);case 21:if(e.prev=21,!d){e.next=39;break}return e.next=25,d.json();case 25:if(m=e.sent,!d.ok){e.next=34;break}n.setters[i]((function(e){return(0,r.Z)((0,r.Z)({},e),m.submissions)})),o.appId&&l.push({key:"appId",value:a.id}),o.category&&l.push({key:"category",value:i}),c>1&&l.push({key:"page",value:c}),L(l),e.next=39;break;case 34:if(401!==d.status){e.next=37;break}return window.location.href="/login",e.abrupt("return");case 37:console.error("Error fetching submissions, error code:",d.status),console.error("Response:\n",m);case 39:return e.finish(21);case 40:case"end":return e.stop()}}),e,this,[[12,18,21,40]])}))),x.apply(this,arguments)}function j(e,t){var n,s;for(var a in t){var i,c;(null===(i=(s=t[a]).getter)||void 0===i?void 0:i.buttonId)===this.id?(this.classList.add("selected"),n=a,s.setter((0,r.Z)((0,r.Z)({},s.getter),{},{selected:!0}))):null!==(c=s.getter)&&void 0!==c&&c.selected&&(delete s.getter.selected,s.setter((0,r.Z)({},s.getter)))}var o=new Proxy(new URLSearchParams(window.location.search),{get:function(e,t){return e.get(t)}}),u=o.appId,l=[];u&&l.push({key:"appId",value:u}),o.s&&l.push({key:"s",value:o.s}),l.push({key:"category",value:n}),L(l)}function Z(e){var t,n,s,r,a;if(null!==(t=e.newSubmissions)&&void 0!==t&&t.selected?a=e.newSubmissions:null!==(n=e.acceptedSubmissions)&&void 0!==n&&n.selected?a=e.acceptedSubmissions:null!==(s=e.pendingSubmissions)&&void 0!==s&&s.selected?a=e.pendingSubmissions:null!==(r=e.rejectedSubmissions)&&void 0!==r&&r.selected&&(a=e.rejectedSubmissions),a){var i,c=(0,p.jsx)("button",{className:"prev-page","data-page-number":a.currentPage-1,disabled:a.currentPage<=1,children:"\u0627\u0644\u0633\u0627\u0628\u0642"});a.currentPage>1&&(i=(0,p.jsx)("button",{"data-page-number":"1",children:"1"}));var o,u=(0,p.jsx)("button",{className:"next-page","data-page-number":a.currentPage+1,disabled:a.currentPage>=a.totalPages,children:"\u0627\u0644\u062a\u0627\u0644\u064a"});return a.currentPage<a.totalPages&&(o=(0,p.jsx)("button",{"data-page-number":a.totalPages,children:a.totalPages})),(0,p.jsxs)("section",{className:"page-selector",children:[c,i,(0,p.jsx)("button",{"data-page-number":a.currentPage,className:"selected-page",children:a.currentPage}),o,u]})}}function w(e){var t=e.applications,n=e.categories;if(t.length<=0||!n[0]||!("rows"in n[0]))return null;var s={total:t.find((function(e){return!0===e.selected})).totalSubmissions,selectedCategory:n.find((function(e){return!0===e.selected})).count};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{children:(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0639\u062f\u062f \u0627\u0644\u062a\u0642\u062f\u064a\u0645\u0627\u062a:"})," ",s.total]})}),(0,p.jsx)("div",{children:(0,p.jsxs)("p",{children:[(0,p.jsx)("b",{children:"\u0639\u062f\u062f \u0627\u0644\u062a\u0642\u062f\u064a\u0645\u0627\u062a \u0641\u064a \u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0645\u062d\u062f\u062f:"})," ",s.selectedCategory]})})]})}function k(e){var t,n,s=(0,i.Z)(e);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r&&r.selected){t=r.rows.map((function(e,t){return(0,p.jsxs)("tr",{"data-id":e.id,children:[(0,p.jsx)("td",{children:e.id}),(0,p.jsx)("td",{className:"spacing-cell"}),(0,p.jsx)("td",{children:e.name}),(0,p.jsx)("td",{className:"spacing-cell"}),(0,p.jsx)("td",{children:e.id_number})]},t)}));break}}}catch(a){s.e(a)}finally{s.f()}return(0,p.jsxs)("table",{className:"submissions",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"\u0627\u0644\u0631\u0642\u0645"}),(0,p.jsx)("th",{className:"spacing-cell"}),(0,p.jsx)("th",{children:"\u0627\u0644\u0625\u0633\u0645"}),(0,p.jsx)("th",{className:"spacing-cell"}),(0,p.jsx)("th",{children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629"})]})}),(0,p.jsx)("tbody",{children:t})]})}function S(e){var t,n;return e?(t=e.map((function(e,t){return(0,p.jsx)("option",{value:"".concat(e.id),children:"".concat(e.jobName," | ").concat(e.startDate).concat(e.closed?" [Closed]":"")},e.id)})),n=(0,p.jsx)("select",{id:"applications-select",children:t})):n=(0,p.jsx)("select",{id:"applications-select",defaultValue:"default",children:(0,p.jsx)("option",{value:"default",disabled:!0,children:"Loading ..."})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{htmlFor:"applications-select",children:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062a\u0642\u062f\u064a\u0645\u0627\u062a \u0627\u0644\u0645\u0633\u062c\u0644\u0629"}),n]})}function I(e){return N.apply(this,arguments)}function N(){return N=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,i,c,o,l,d,p,f,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Proxy(new URLSearchParams(window.location.search),{get:function(e,t){return e.get(t)}}),i=a.appId,c=a.category,o=a.page,l=a.s,d=[],i&&d.push({key:"appId",value:i}),c&&d.push({key:"category",value:c}),o&&d.push({key:"page",value:o}),l&&d.push({key:"s",value:l}),p=E("".concat(u.Z.api,"/submissions"),d),e.prev=11,e.next=14,fetch(p,{method:"GET",credentials:"include"});case 14:n=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),console.error(e.t0);case 20:if(e.prev=20,!n){e.next=40;break}return e.next=24,n.json();case 24:if(f=e.sent,!n.ok){e.next=35;break}t.setNewSubmissions((0,r.Z)((0,r.Z)({},f.submissions.new),{},{buttonId:"category-new"})),t.setAcceptedSubmissions((0,r.Z)((0,r.Z)({},f.submissions.accepted),{},{buttonId:"category-accepted"})),t.setPendingSubmissions((0,r.Z)((0,r.Z)({},f.submissions.pending),{},{buttonId:"category-pending"})),t.setRejectedSubmissions((0,r.Z)((0,r.Z)({},f.submissions.rejected),{},{buttonId:"category-rejected"})),f.applications=f.applications.map((function(e,t){var n=new Date;return n.setTime(Number(e.startDate)),(0,r.Z)((0,r.Z)({},e),{},{startDate:n.toLocaleDateString("ar-US",{year:"numeric",month:"long",day:"numeric"})})})),t.setApplications(f.applications),l&&(h=decodeURI(l),document.getElementById("search-submissions").value=h),e.next=40;break;case 35:if(401!==n.status){e.next=38;break}return window.location.href="/login",e.abrupt("return");case 38:console.error("Error fetching submissions, error code:",n.status),console.error("Response:\n",f);case 40:return e.finish(20);case 41:case"end":return e.stop()}}),e,null,[[11,17,20,41]])}))),N.apply(this,arguments)}function E(e,t){var n,s=new URL(e),r=s.searchParams,a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;r.set(c.key,c.value)}}catch(o){a.e(o)}finally{a.f()}return s.toString()}function L(e){var t=E(window.location.origin+window.location.pathname,e);window.history.pushState({path:t},"",t)}var P=function(e){e.adminInfo;var t=(0,o.useState)(),n=(0,c.Z)(t,2),s=n[0],r=n[1],a=(0,o.useState)(),u=(0,c.Z)(a,2),b=u[0],g=u[1],x=(0,o.useState)(),N=(0,c.Z)(x,2),E=N[0],L=N[1],P=(0,o.useState)(),A=(0,c.Z)(P,2),R=A[0],D=A[1],U=(0,l.Z)(!1),T=(0,o.useRef)(!1);return(0,o.useEffect)((function(){function e(e){I({setNewSubmissions:r,setAcceptedSubmissions:g,setPendingSubmissions:L,setRejectedSubmissions:D,setApplications:U.set})}return window.addEventListener("popstate",e),T.current||(T.current=!0,I({setNewSubmissions:r,setAcceptedSubmissions:g,setPendingSubmissions:L,setRejectedSubmissions:D,setApplications:U.set})),function(){window.removeEventListener("popstate",e)}}),[U.set]),(0,o.useEffect)((function(){if(Array.isArray(U.array)){var e=document.getElementById("applications-select"),t=U.array.findIndex((function(e){return!0===e.selected}));return"number"==typeof t&&(e.selectedIndex=t),e.addEventListener("change",n),function(){e.removeEventListener("change",n)}}function n(e){var t=parseInt(this.value);f(t)?v.call(this,e,t,{setNewSubmissions:r,setAcceptedSubmissions:g,setPendingSubmissions:L,setRejectedSubmissions:D,setApplications:U.set}):e.preventDefault()}}),[U]),(0,o.useEffect)((function(){if(s&&b&&E&&R&&Array.isArray(U.array)){var e,t=document.querySelectorAll(".category-tabs button"),n=(0,i.Z)(t);try{for(n.s();!(e=n.n()).done;){e.value.addEventListener("click",v)}}catch(k){n.e(k)}finally{n.f()}var a,c=document.querySelectorAll(".Home .page-selector button"),o=(0,i.Z)(c);try{for(o.s();!(a=o.n()).done;){a.value.addEventListener("click",x)}}catch(k){o.e(k)}finally{o.f()}var u,l=document.querySelectorAll(".submissions tbody tr"),d=(0,i.Z)(l);try{for(d.s();!(u=d.n()).done;){u.value.addEventListener("click",h)}}catch(k){d.e(k)}finally{d.f()}var p=document.getElementById("search-submissions"),f=document.getElementById("search-btn");return p.addEventListener("keypress",Z),f.addEventListener("click",w),function(){var e,n=(0,i.Z)(t);try{for(n.s();!(e=n.n()).done;){e.value.removeEventListener("click",v)}}catch(k){n.e(k)}finally{n.f()}var s,r=(0,i.Z)(c);try{for(r.s();!(s=r.n()).done;){s.value.removeEventListener("click",x)}}catch(k){r.e(k)}finally{r.f()}var a,o=(0,i.Z)(l);try{for(o.s();!(a=o.n()).done;){a.value.removeEventListener("click",h)}}catch(k){o.e(k)}finally{o.f()}p.removeEventListener("keypress",Z),f.removeEventListener("click",w)}}function v(e){if(this.classList.contains("selected"))e.preventDefault();else{var t=[{getter:s,setter:r},{getter:b,setter:g},{getter:E,setter:L},{getter:R,setter:D}];j.call(this,e,t)}}function x(e){if(this.classList.contains("selected-page"))e.preventDefault();else{var t={getters:[s,b,E,R],setters:[r,g,L,D]};y.call(this,e,t,U.array)}}function Z(e){"Enter"===e.key&&f.click()}function w(e){var t=p.value.trim();if(0!==t.length){var n={getters:[s,b,E,R],setters:[r,g,L,D]};m.call(this,e,t,n,U.array)}}}),[s,b,E,R,U.array]),(0,p.jsx)("div",{className:"Home",children:(0,p.jsxs)("main",{children:[(0,p.jsxs)("section",{className:"controls",children:[S(U.array),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"search-container",children:[(0,p.jsx)("input",{type:"search",id:"search-submissions",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0648\u0627\u0633\u0637\u0629 [\u0627\u0644\u0631\u0642\u0645 | \u0627\u0644\u0625\u0633\u0645 | \u0627\u0644\u0647\u0648\u064a\u0629 | \u0627\u0644\u0647\u0627\u062a\u0641]"}),(0,p.jsx)("button",{id:"search-btn",style:{backgroundImage:"url(".concat(d,")")}})]})})]}),(0,p.jsx)("section",{className:"submissions-info",children:w({applications:U.array,categories:[s,b,E,R]})}),(0,p.jsxs)("section",{className:"submissions-area",children:[(0,p.jsxs)("div",{className:"category-tabs",children:[(0,p.jsx)("button",{id:"category-new",className:null!==s&&void 0!==s&&s.selected?"selected":null,children:"\u0627\u0644\u062c\u062f\u064a\u062f\u0629"}),(0,p.jsx)("button",{id:"category-accepted",className:null!==b&&void 0!==b&&b.selected?"selected":null,children:"\u0627\u0644\u0645\u0642\u0628\u0648\u0644\u0629"}),(0,p.jsx)("button",{id:"category-pending",className:null!==E&&void 0!==E&&E.selected?"selected":null,children:"\u0627\u0644\u0645\u0639\u0644\u0642\u0629"}),(0,p.jsx)("button",{id:"category-rejected",className:null!==R&&void 0!==R&&R.selected?"selected":null,children:"\u0627\u0644\u0645\u0631\u0641\u0648\u0636\u0629"})]}),(0,p.jsx)("div",{className:"submission-field",children:k([s,b,E,R])})]}),Z({newSubmissions:s,acceptedSubmissions:b,pendingSubmissions:E,rejectedSubmissions:R})]})})}}}]);
//# sourceMappingURL=206.42050b3a.chunk.js.map